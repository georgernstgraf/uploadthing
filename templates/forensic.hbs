{{> top}}
<section id="timeselector"
         class="mb-4 p-3 border border-2 border-primary rounded-3">
    <h2 class="text-center">Zeitauswahl</h2>
    <form action="forensic"
          method="get"
          class="container text-center">
        <div class="row mt-2">
            <label class="col">START Time: <input type="text"
                       name="starttime"
                       class="px-3 ms-3"
                       id="timestartselect"
                       value="{{starttime}}">
            </label>
            <label class="col">Start Date: <input type="date"
                       name="startdate"
                       class="px-3 ms-3"
                       value="{{startdate}}"></label>
        </div>
        <div class="row mt-2">
            <label class="col"><input type="submit"
                       class="btn btn-secondary w-100"
                       value="Suchen"></label>
        </div>
        <div class="row mt-2 text-body text-opacity-50">
            <label class="col">End Time: <input type="text"
                       name="endtime"
                       class="px-3 ms-3"
                       id="timeendselect"
                       value="{{endtime}}">
            </label>
            <label class="col">End Date: <input type="date"
                       name="enddate"
                       class="px-3 ms-3"
                       value="{{enddate}}"></label>
        </div>
    </form>
</section>
</main>
<section class="container">
    <h2 class="text-center">Sch√ºler und IP Adressen</h2>
    <h3 class="text-center">Zeitraum: <span class="fs-6">({{startdate}})</span> {{starttime}} - <span class="fs-6">({{enddate}})</span>
        {{endtime}}
    </h3>
    <ul class="list-unstyled ps-5 text-start">
        {{#each forensic_ipcount_array}}
        <li class="row">
            {{#let (get ../ip2users this.ip) as |user|}}
            <details class="col border border-2 rounded p-2 mb-2">
                <summary>Name: {{user.name}} | IP: {{this.ip}} ({{this.count}}, zuletzt: {{this.lastseen}})</summary>
                <div class="row">
                    <div class="col">
                        <ul class="list-unstyled p-1">
                            <li class="text-center">{{user.name}} - Registrierungen</li>
                            {{#each (get ../../user_history user.email) }}
                            <li>{{this.at}} --> {{this.ip}}</li>
                            {{/each}}
                        </ul>
                    </div>
                    <div class="col">
                        <ul class="list-unstyled p-1">
                            <li class="text-center">{{this.ip}} - Registrierungen</li>
                            {{#each (get ../../ip_history this.ip) }}
                            <li>{{this.at}} --> {{this.name}}</li>
                            {{/each}}
                        </ul>
                    </div>
                </div>
            </details>
            {{/let}}
        </li>
        {{/each}}
    </ul>
</section>
</body>

</html>
