<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <title>{{page_title}}</title>
    <link rel="icon"
          type="image/svg+xml"
          href="/static/favicon.svg">
    <link rel="stylesheet"
          href="/static/ibm-plex-sans.css">
    <link rel="stylesheet"
          href="/static/bootstrap.css">
    <link rel="stylesheet"
          href="/static/leisure-theme.css">
    <style>
        [x-cloak] {
            display: none !important;
        }
    </style>
    <script src="/static/htmx.js"></script>
    <script src="/static/bootstrap.js"></script>
    <script src="/static/alpine.min.js"
            defer></script>
</head>

<body>
    <header class="position-fixed top-0 start-0 end-0 app-header"
            style="z-index: 1000;">
        <div class="position-relative mx-2 mt-2">
            <div class="leisure-card py-1 d-flex justify-content-center"
                 style="border-radius: 16px;">
                <a class="mb-0 text-center fw-bold h1"
                   href="http://{{page_title}}/"
                   style="color: var(--leisure-primary); font-size: 1.25rem;">http://{{page_title}}/</a>
            </div>
            <button id="theme-toggle"
                    class="btn btn-sm btn-outline-secondary rounded-pill px-3 position-absolute top-50 end-0 translate-middle-y">Theme</button>
        </div>
    </header>
    <script>
        (function () {
            const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            document.documentElement.setAttribute('data-bs-theme', savedTheme);

            window.addEventListener('load', () => {
                const toggleBtn = document.getElementById('theme-toggle');
                toggleBtn.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-bs-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    document.documentElement.setAttribute('data-bs-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                });
            });
        })();
    </script>
    <main class="container mt-2 p-2 page-content">
        <nav class="d-flex justify-content-center gap-2 mt-5 mb-2 mx-auto p-1 flex-wrap"
              style="width: fit-content; max-width: 100%; background: var(--leisure-glass-bg); backdrop-filter: blur(10px); border-radius: 50px; border: 1px solid var(--leisure-glass-border); box-shadow: var(--leisure-shadow-soft);">
            <a href="/"
               class="btn btn-sm btn-info text-white border-0 flex-grow-1 flex-sm-grow-0">Home</a>
            <a href="/forensic"
               class="btn btn-sm flex-grow-1 flex-sm-grow-0"
               style="color: transparent; background: transparent; border: none;">Forensic</a>
            <a href="/upload"
               class="btn btn-sm btn-info text-white border-0 flex-grow-1 flex-sm-grow-0">Zipfile Upload</a>
        </nav>
        <div class="d-flex justify-content-center mb-2">
            <a href="/whoami"
               class="text-decoration-none user-badge p-2 leisure-card w-100"
               style="max-width: 500px; justify-content: center;">
                {{#if remote_user}}
                    <div class="d-flex align-items-center gap-2 justify-content-center flex-wrap text-center text-sm-start">
                        <div class="rounded-circle bg-danger text-white d-flex align-items-center justify-content-center"
                             style="width: 36px; height: 36px; font-size: 1.1rem;">
                            {{givenNameInitial remote_user.name}}
                        </div>
                        <div class="d-flex flex-column text-dark">
                            <span class="fw-bold text-break"
                                  style="font-size: 0.95rem;">{{remote_user.name}}</span>
                            <span class="text-muted text-break"
                                  style="font-size: 0.75rem;">{{remote_user.email}} / {{remote_user.klasse}}</span>
                        </div>
                        <span class="badge rounded-pill bg-light text-dark border ms-1"
                              style="font-size: 0.7rem;">Change</span>
                    </div>
                {{else}}
                    <span class="text-danger fw-bold text-decoration-underline text-center d-block"
                          style="font-size: 0.95rem;">Bitte Name bekanntgeben!</span>
                {{/if}}
            </a>
        </div>
        <div class="text-center mb-2 opacity-50">
            <span class="text-uppercase"
                  style="font-size: 0.7rem; letter-spacing: 2px;">Meine IP: {{remote_ip}}</span>
        </div>
