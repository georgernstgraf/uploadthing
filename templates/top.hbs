<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <title>PLF</title>
    <link rel="stylesheet"
          href="/static/bootstrap.css">
    <link rel="stylesheet"
          href="/static/leisure-theme.css">
    <style>[x-cloak] { display: none !important; }</style>
    <script src="/static/htmx.js"></script>
    <script src="/static/bootstrap.js"></script>
    <script src="/static/alpine.min.js" defer></script>
</head>

<body>
    <div class="position-absolute top-0 end-0 p-3">
        <button id="theme-toggle"
                class="btn btn-sm btn-outline-secondary rounded-pill px-3">Theme</button>
    </div>
    <script>
        (function () {
            const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            document.documentElement.setAttribute('data-bs-theme', savedTheme);

            window.addEventListener('load', () => {
                const toggleBtn = document.getElementById('theme-toggle');
                toggleBtn.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-bs-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    document.documentElement.setAttribute('data-bs-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                });
            });
        })();
    </script>
    <main class="container mt-4 p-3">
        <div class="leisure-card floating-element mb-3">
            <h1 class="mb-2 text-center display-6 fw-bold" style="color: var(--leisure-primary); font-size: 1.5rem;">http://router:8000/</h1>
        </div>

        <nav class="d-flex justify-content-center gap-3 my-3 mx-auto p-2 flex-wrap" style="width: fit-content; max-width: 100%; background: var(--leisure-glass-bg); backdrop-filter: blur(10px); border-radius: 50px; border: 1px solid var(--leisure-glass-border); box-shadow: var(--leisure-shadow-soft);">
            <a href="/"
               class="btn btn-lg btn-info text-white border-0 flex-grow-1 flex-sm-grow-0">Home</a>
            <a href="/forensic"
               class="btn btn-lg btn-outline-light flex-grow-1 flex-sm-grow-0"
               style="color: var(--leisure-primary-soft); border-color: transparent;">Forensic</a>
            <a href="/upload"
               class="btn btn-lg btn-info text-white border-0 flex-grow-1 flex-sm-grow-0">Zipfile Upload</a>
        </nav>

        <div class="d-flex justify-content-center mb-4">
            <a href="/whoami"
               class="text-decoration-none user-badge p-3 leisure-card w-100" style="max-width: 500px; justify-content: center;">
                {{#if remote_user}}
                    <div class="d-flex align-items-center gap-3 justify-content-center flex-wrap text-center text-sm-start">
                        <div class="rounded-circle bg-danger text-white d-flex align-items-center justify-content-center" style="width: 50px; height: 50px; font-size: 1.5rem;">
                            {{remote_user.name.[0]}}
                        </div>
                        <div class="d-flex flex-column text-dark">
                            <span class="fw-bold fs-5 text-break">{{remote_user.name}}</span>
                            <span class="text-muted small text-break">{{remote_user.email}} / {{remote_user.klasse}}</span>
                        </div>
                        <span class="badge rounded-pill bg-light text-dark border ms-2">Change</span>
                    </div>
                {{else}}
                    <span class="text-danger fw-bold text-decoration-underline fs-5 text-center d-block">Bitte Name bekanntgeben!</span>
                {{/if}}
            </a>
        </div>
        
        <div class="text-center mb-5 opacity-50">
            <h6 class="text-uppercase letter-spacing-2" style="font-size: 0.8rem; letter-spacing: 2px;">Meine IP: {{remote_ip}}</h6>
        </div>